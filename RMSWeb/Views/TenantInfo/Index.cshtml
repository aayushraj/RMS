@using RMS.Models

@model TenantInfoModel
<style>
    .center {
  display: block;
  margin-left: auto;
  margin-right: auto;
  width: 50%;
  font-size:smaller;
  }

#textbox{
    height:30px;
    width:200px;
    font-size:medium;
  }

  #searchbtn{
      height:30px;
  }
 
</style>
 <style type="text/css">
    .searchspan {
        float: right;
        margin-left:6px;
        position: absolute;
        
    }
</style>


@{
    var loopcounter = 0;
    var count = 0;
    var j=0;
    int? familyListCount = 0;
    string FullName = "";
    var listCount = @Model.List.Count;
    var list = @Model.List;
}

@if (Model.IsSuccess)
{
    <script>
        console.log('hi');
        toastSuccess(@Model.SuccessMessage);
    </script>
}

@if (!Model.IsSuccess && Model.flag == 2)
{
    <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <strong>@Model.SuccessMessage</strong>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
}
<div>
    <div class="row">
        <div class="col-sm-12">
            <div class="form-inline pull-left">
               <input type="text" class="form-control" id="searchTxt"/><span class="fas fa-search searchspan"></span>
            </div>
        </div>
    </div>
</div>

<br>
@*<div class="card">
    <div class="card-header">
        <b>Tenant Information</b>
         <a class="btn btn-primary btn-sm" title="Edit Tenant" asp-controller="TenantInfo" asp-action="Create" style="float:right"><i class="fa fa-plus">&nbsp;</i>Add Tenant</a>
    </div>
    <div class="card-body"> 
       @while(loopcounter<listCount)
       {
        <div class="row">
            @for(int i=loopcounter;i<listCount ;i++)
            {
                    FullName = $"{list[i].FirstName} {list[i].LastName}";
                    <div class="col-md-4">
                        
                    <div class="card">
                      <div class="card-header">
                          <center><b> @FullName</b></center>
                      </div>
                      <div class="card-body">
                          <div>
                          <img src = "~/img/avatar5.png" class="center rounded-circle"> 
                          </div>
                          <br>
                          <div>
                              <center>
                                  <i class="fas fa-map-marker-alt fa-fw"></i>@list[i].Address
                                  <br>
                                  <b><i class="fa fa-address-book fa-fw"></i>@list[i].Contact</b> 
                                  <br>
                                  <b><i class="fas fa-users fa-fw" title="Family Member"></i>0</b> 
                                  <br>
                                 <a href="/tenantinfo/Edit/@list[i].Id"  style="float :left!important"><i class="fas fa-pen"> </i></a> 
                                 <a href="/tenantinfo/Delete/@list[i].Id"  style="float :right!important"><i class="fas fa-trash-alt" style="color:red"> </i></a> 
                                 
                                  <a href ="/TenantInfo/GetTenantDetails/@list[i].Id" target="_blank" title="View details" ><input type="button" value="View details" class="btn btn-info btn-sm" ></a>
                              </center>
                          </div>
                      </div>
                  </div>

                </div>
                loopcounter++;
                count++;
                if(count==3)
                {
                    count = 0;
                    break;
                }
            }
            </div>
         }  
        
       
    </div>
  </div>*@
  <div id="getTenantDetails">

  </div>
  <script>
      $(()=> {
          getTenant();

          $('#searchTxt').on('keyup',()=>{
              getTenant();
          });
      });  


        function getTenant(){
            $.ajax({
                url:'@Url.Action("SearchTenant","TenantInfo")',
                datatype:'html',
                method: 'GET',
                data: {search : $('#searchTxt').val()},
                success : function(res){
                    $('#getTenantDetails').html('').html(res);
                },
                error:function(err){

                }
            })
        }
  </script>

<script src="../../plugins/bootstrap/js/bootstrap.bundle.min.js"></script>

<script>
    var Toast = function(msg){
        console.log(msg);
        toastSuccess(msg);
    }
</script>







